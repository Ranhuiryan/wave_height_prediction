<h1 style="text-align:center">海洋数据融合海洋浪高预测算法说明文档</h1>
<p style="text-align:center">Written by Ranhui, 9/12/2020</p>

# 描述

本文档为演示海洋数据融合海洋浪高预测算法目的编写, 演示算法基于命令行程序, 包括建立训练数据, 模型训练和预测三个主要部分。运行结果请以最终软件为准, 后期代码变更可能会导致运行结果与本文档范例不符。

# 运行软件版本

代码已在以下软件中测试通过：

Python：3.8

# 快速使用方法

1. 安装必要运行软件：[Python](https://www.python.org/downloads/windows/)（推荐3.8以上版本）；

2. 安装 Python 开发环境依赖, 在本代码文件根目录中打开 `cmd` , 运行以下命令：

```bash
pip install -r requirements.txt -i https://pypi.doubanio.com/simple
```

3. 在本代码文件根目录中打开 `cmd` , 运行以下命令：

```bash
python main_K.py
```

# 数据文件格式

仅支持 `csv` （逗号分隔符）格式的数据文件, 文件格式如下:

```csv
date,air_temp,wind_dir,wind_spd,air_pre,sea_temp,height,period
2015-01-01 00:00:00,11.6,14.0,16.5,1020.8,11.6,1.4,5.5
2015-01-01 01:00:00,11.5,10.0,12.5,1021.5,11.5,1.0,6.0
2015-01-01 02:00:00,11.5,13.0,11.4,1022.3,11.5,1.0,6.0
2015-01-01 03:00:00,11.4,8.0,11.8,1022.4,11.4,1.0,6.0
```

csv 文件第一行为列名, 每一行数据用 `,` 逗号分隔符隔开。第一行列名和环境参数参数的对应关系如下:

|     列名        |     环境参数（单位）                                  |
|-----------------|-----------------------------------------------------|
|     date        |     数据记录时间（日期格式“年-月-日 小时:分钟”）       |
|     station     |     站台名                                          |
|     air_temp    |     大气温度（摄氏度）                               |
|     wind_dir    |     风向（度）                                       |
|     wind_spd    |     风速（米/秒）                                    |
|     air_pre     |     大气压力（帕）                                   |
|     sea_temp    |     海水温度（摄氏度）                                |
|     height      |     浪高（米）                                       |
|     period      |     浪周期（秒）                                      |

# 可选参数

`--data_path`: 设置数据文件保存路径, 默认工程文件根目录。

`--loss`: 选择模型训练过程中损失计算方法, 可选 `mae` （平均绝对误差）与 `mse` （平均均方误差）, 默认 `mae`。

`--lr`: 设置模型训练的学习率, 默认 `0.0001`。

`--epochs`: 设置模型训练的学习次数, 默认 `500`。

`--batch_size`: 设置一次输入训练模型的数据量, 该值设置越高, 对内存占用越大, 默认 `128`。

`--time_step`: 设置训练数据的时间步长, 应为正整数, 时间单位按小时计算, 默认 `32`。

`--predict_len`: 设置预测的时间步长间隔, 应为正整数, 时间单位按小时计算, 默认 `3`。

`--save_path`: 设置预测结果保存和查看路径, 默认 `./results`。

**示例一**: 使用默认参数, 读取工程文件目录下的 `example.csv` 数据文件, 训练模型并输出预测结果。

```bash
python main_K.py
```

**示例二**: 读取 `ocean` 文件夹下的数据文件, 采用计算平均绝对误差, 设置模型训练的学习次数为 500 次, 设置训练数据的时间步长为 32 小时, 预测的时间步长间隔为 3 小时, 训练模型并输出预测结果。

```bash
python main_K.py --data_path ocean --loss mae --epochs 500 --time_step 32 --predict_len 3
```
